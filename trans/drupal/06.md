# 第六章基本内容

到目前为止，在 Drupal 中的内容和内容管理主题方面，我们所处理的一切，无论在创建我们自己独特的站点方面多么重要，都必须退居次要位置。毕竟，内容*就是这一切的意义所在！随着提供动态内容的网站数量激增，现在绝对有必要在网站上提供有意义的、动态的和相关的信息，以实现繁荣。对于网站用户来说，如何在幕后实现这一点其实并不重要，但如果你能让他们的浏览体验变得轻松，并且与他们相关，他们会支持你。*

*在这种情况下，无麻烦意味着什么？*内容需要易于查找，这反过来意味着它需要组织良好。它需要很好地呈现，并且易于交互，换句话说，简单易用。Drupal 已经完成了大部分工作，只需很少的额外工作，我们就可以提供一些非常强大的功能。然而，在我们考虑添加更多功能之前，我们应该确保我们已经很好地掌握了如何使用已经存在的功能。

为此，本章将在继续介绍 Drupal 的一些有趣而强大的功能之前，为内容管理的基础知识打下良好的基础。具体而言，我们将关注以下内容：

*   内容类型
*   处理内容
*   内容相关模块

在这里完成后，我们将了解如何使用 HTML 和 PHP 组合一些整洁的页面，以及如何对所有数据进行分类和分类以提供复杂直观的内容管理系统这一非常重要的任务。所有这些都将在下一章中介绍。现在，让我们继续熟悉 Drupal 及其内容。

# 内容类型

您已经了解了 Drupal 的一些内容类型的结构和用法。这实际上相当有用，因为这意味着我们可以花时间关注更重要的问题，而不是在 Drupal 中提供更广泛的内容和内容管理概述。不过，这并不是说本节中的所有内容以及后面的内容都已经涵盖。

首先，我们需要对可以在 Drupal 中创建的内容类型有一个很好的了解，然后我们需要了解这些内容类型的各种使用方式。了解这一点将有助于您确定最佳的方式来实现您为您的站点准备的任何功能。

下表列出了 Drupal 默认附带的内容类型：

<colgroup><col style="text-align: left"> <col style="text-align: left"></colgroup> 
| 博客条目 | 博客或 weblog 是一种特定于作者的内容类型，由个人作为日志或日记使用。在 Drupal 中，每个博客作者都可以根据站点的设置和权限向其博客添加附件、HTML 或 PHP 代码。博客的一个很好的例子是：[http://googleblog.blogspot.com/](http://googleblog.blogspot.com/) ，展示了博客内容格式的有趣用法。 |
| 书页 | 书籍是一组有组织的书籍页面类型（实际上现在可以使用任何类型），用于协作创作。书页可以由不同的人添加，以组成一本书，然后可以将其结构化为章节和页面，或者以任何最合适的结构，只要是分层结构。因为几乎任何数据类型都可以添加到一本书中，所以有很多令人兴奋的内容（想想用 PHP 和 Flash 动画创建的补充动态书页的叙事或视觉内容，要创建一本真正独特的基于互联网的书，可能性是无穷的！）。一本书的好例子是 Drupal 站点上为开发人员提供的文档，位于：[http://drupal.org/node/316](http://drupal.org/node/316) 。这是由许多不同的作者随着时间的推移建立起来的。您会注意到，如果启用了 book 模块，则会在站点的所有/大部分帖子上方显示一个额外的大纲标记。单击此选项卡可以将该帖子添加到书籍中。通过这种方式，可以从发布到网站的内容构建书籍。 |
| 评论 | 注释略有不同，因为它们与其他类型的节点不同。换句话说，您不能以创建任何其他内容的方式创建注释。相反，您可以将评论附加到其他内容类型上，这些内容作为一种激发用户讨论的方式非常流行。您可以通过登录 Drupal 论坛[查看实际操作中的评论 http://drupal.org/forum](http://drupal.org/forum) ，并在此处发布或查看各种主题的评论。 |
| **论坛主题** | 论坛主题是论坛的组成部分。论坛只能包含论坛主题及其评论，而书籍可以包含几乎任何内容类型。论坛中的信息按层次结构进行分类，对于主持讨论以及基于社区的支持和学习非常有用。互联网上有很多论坛，你也可以访问 Drupal 论坛，了解它们的运作方式。 |
| **第**页 | 页面类型旨在允许您添加基本的、普通的网页，这些网页可以在任何网站上找到。*关于我们*或*使用条款*页面是适合页面类型的候选页面，尽管您可以使用一些动态内容和 HTML 来修饰这些页面。只要看看任何一个网站就可以看到这样的例子。 |

<colgroup><col style="text-align: left"> <col style="text-align: left"></colgroup> 
| 

内容类型

 | 

描述

 |
| --- | --- |
| **投票** | 投票类型提供了提问的工具，并提供了一组答案，然后以图形格式呈现。许多不同的企业利用民意调查来收集政治或营销信息，或进行研究等。民意测验的性质通常是有限的寿命；因此，您必须搜索自己的示例。许多新闻网站，如《时代》杂志进行民意调查，以确定公众意见；因此，这些可能是你最好的选择，看看民意测验如何被很好地利用。 |
| **故事** | 故事页面与标准页面类型大致相同。但是，您可能希望通过对短命页面（如新闻或通知）使用故事类型来区分这两种类型。 |

下表显示了一些可用作贡献的内容类型：

<colgroup><col style="text-align: left"> <col style="text-align: left"></colgroup> 
| 

内容类型

 | 

描述

 |
| --- | --- |
| 无酸 | Acidfree 提供的相册和媒体项类型允许您处理图像和视频内容。该贡献还提供了管理媒体文件的工具。 |
| 每日的 | daily 贡献提供了两种新的节点类型，称为 daily item 和 daily container。它们用于按日期方便浏览内容项，甚至控制将来内容项在站点上的可用时间。 |
| 屈曲节点 | 此贡献允许用户定义和编辑自己的内容类型。 |
| 头版 | 虽然从技术上讲不是节点/内容类型，但 FrontPage 允许用户创建一个 FrontPage，它不必符合 Drupal 站点其余部分的标准页面布局。如果您想在站点中添加介绍页面，此功能非常有用。 |

每次为站点创建新内容时，都有几个选项可供您做出适当的决定，这些选项显示在文章正文下方的列表中。根据给定用户的权限，他们也会有一些（但希望不是全部）选项可用。例如，如果为经过身份验证的用户启用了上载权限，则他们将能够决定是否将文件附加到他们创建的任何内容。

作为管理者，你的权力更大；因此，我们来看看创建标准页面内容类型时可用的默认选项。请注意，不同类型的内容也可能有其他可用选项。例如，如果您创建一个新的轮询，您必须通过在轮询类型的唯一**设置**部分中设置**轮询持续时间**来决定轮询的运行时间。

下一节中讨论的内容选项代表了大多数类型。

# 处理内容

知道*哪些*在内容方面可用，哪些不可用，并不一定意味着您自动知道*如何使用*内容。因此，本节将更深入地了解如何编辑和配置内容以反映网站的需求。我们已经在前几章中讨论了内容，因此已经熟悉了本节的各个部分。然而，这里的意图是给你一个单一的、有凝聚力的参考点，从中学习。

使用内容有几个不同的方面，我们将从如何在创建新内容时设置正确的默认选项开始。接下来，重要的是查看内容**管理**设施，为了圆满完成所有工作，我们将简要讨论一般需要注意的问题，因为处理内容有时会非常混乱。

## 内容选项

创建新内容时，**输入格式**部分如下所示（如果**输入格式**链接最小化，点击它调出完整版本）：

![Content Options](graphics/1800_06_01.jpg)

默认情况下，选择**过滤 HTML**选项。除非你有充分的理由使用其他可用选项之一，否则请坚持使用此选项。尤其要小心允许任何用户将 PHP 添加到他们的内容中，因为这可能会使您的站点面临严重风险。请记住，即使是**过滤的 HTML**也不是完全安全的，因为用户仍然可以将指向恶意网址的链接添加到他们的页面中，这与在您的网站上添加恶意网址是一样的。

下面是一个示例，说明用户如何在进行攻击之前获取有关您站点的信息（假设启用了**PHP 代码**选项）。在页面正文中，向页面添加以下代码片段：

```
<?
Phpinfo();
?>

```

确保启用了**PHP 代码**选项，在为页面提供**标题**后，点击**预览**。您应该看到如下内容：

![Content Options](graphics/1800_06_02.jpg)

虽然此屏幕截图中的服务器信息可能不够清晰，无法阅读，但对于联机查看页面的人来说，它肯定足够清晰，可以了解有关服务器的所有信息。在这种情况下，与其说抱歉，不如说安全，您应该将这种设置的默认选项保留为**过滤 HTML。**所有这些都是为了重申我们之前在研究用户和权限时讨论过的一点：

### 注

请确保您只给受信任的用户足够的权限来完成他们的角色，而不是更多！

在继续之前，我应该提到，在下一章中，我们将讨论如何创建自定义输入格式，因为默认选项可能并不总是适合站点的要求。

**接下来，创作信息**只有两个选项。第一个名字是内容的作者，第二个名字是内容首次创建的日期。当然，修改内容不会改变在日期编写的**。但是，如果您正在修改一个已经创建的页面，那么您会遇到一个日志选项（在首次创建内容时也可以使用该选项）。**

例如，典型的日志消息可能如下所示：

![Content Options](graphics/1800_06_03.jpg)

如果您想知道为什么我没有费心在这个日志消息中添加一个日期，那是因为 Drupal 在自动查看内容修订版时会清楚地说明这一点。等到我们讨论了修订之后，再看看日志消息对其内容的影响。

这个日志工具非常简单，但应该满足大多数人的需要。将来可能会为 Drupal 引入一个新的、更复杂的日志系统，所以请注意这一点。

**发布选项**可能很难正确设置，具体取决于设置方式。这就是他们现在的样子：

![Content Options](graphics/1800_06_04.jpg)

正如您将在*管理内容的下一节中看到的，*可以决定是否需要对来自特定用户的特定类型的内容进行调节，然后才能允许其进入网站进行一般消费。如果是这种情况，您或指定用户将能够通过审核队列确认任何和所有内容都符合网站要求。

在上一个屏幕截图中，添加的内容直接发布，无需调节。启用第二个选项**在适度队列**中，将强制内容在发布前获得批准。已选择第三个选项，这将导致创建的内容在首次发布时出现在网站的首页上（除非您已将特定节点设置为显示在此处）。

例如，默认情况下，你不太可能希望新的书页出现在头版，而不是行业专家的博客；因此，仅对那些应该抢走一些风头的内容类型启用此选项。

第四个选项**粘滞在列表顶部**，使节点保持在列表顶部，而不管有多少其他帖子。这对于向论坛发布重要消息非常有用。例如，如果对如何在给定的论坛上做某件事感到困惑，请写一条说明如何做，然后选择此选项将其固定在论坛顶部。通过这种方式，你可以确保这是每个人访问该论坛时看到的第一件事。

最后一个选项**创建新版本**会导致 Drupal 在内容更新或修订时创建新版本。这意味着您既要维护内容的旧版本，又要创建新版本。如果您希望跟踪对文档所做的更改，这将非常有用。如果已经创建并跟踪了一个新版本，那么下次查看内容时（假设您有足够的权限），您将注意到页面上有一个新的**修订**选项卡，如下所示：

![Content Options](graphics/1800_06_05.jpg)

使用此**修订版**页面，现在可以非常轻松地处理您的内容。例如，您可以通过点击**回复**来决定哪个修订应该是活动修订（显示给其他人），或者您可以**删除**修订。请注意，添加到内容类型的日志消息也显示在每个修订的底部。从中可以看出，它们对于在经常修改的内容中保持良好的版本控制非常重要。在本例中，书页内容修订版本的日志消息提到了标题的更改。

接下来，下一节**注释设置**只允许您确定其他用户是否能够向内容添加注释，如下所示：

![Content Options](graphics/1800_06_06.jpg)

第一个选项是**禁用**，如果你发布的内容不适合评论，那么这个选项很有用。也许像我一样，你不喜欢批评你的诗歌，或者类似的东西。第二个选项只允许那些具有管理权限的用户对此内容发表评论，尽管其他用户可以查看评论，最后一个选项允许所有具有足够权限的用户对您精彩的诗歌（或其他内容）发表评论。

以下一组选项用于向菜单添加内容。下一个屏幕截图显示了如何将一个典型的**关于我们**页面添加到**导航**菜单中：

![Content Options](graphics/1800_06_07.jpg)

在这种情况下，这个页面被赋予了相当大的权重，因为我们只希望它在实际内容发布后显示，这样就不会影响网站的主要焦点。如果您现在查看主菜单并将光标悬停在新的**关于我们**链接上，您将看到以下内容：

![Content Options](graphics/1800_06_08.jpg)

如果您希望再次删除或编辑此菜单项，只需查看相同的**菜单设置**部分，就会有一个自动可用的新复选框将其删除。

最后一个可用选项涉及文件上传的使用；它很容易使用，我们已经看到了它的实际应用，因此我们在这里不再进一步讨论它。关于默认内容选项，这就结束了。不过，还有很多东西需要学习，因此，在我们进入内容管理领域时，请保持您的思维冷静。

## 管理内容

我们在[第 4 章](04.html "Chapter 4. Basics II: Adding Functionality")中看到，在**设置**部分，在**管理**下，可以为内容类型设置默认选项。回到那里，禁用所有的**发布选项**，除了**页面**内容类型（或任何可以使用已验证用户创建的类型）的**适度队列**之外，并保存更改。注销管理员帐户并使用标准帐户登录，然后创建新页面。

假设经过身份验证的用户没有在节点上启用的**管理**权限，他或她将无权修改**发布选项**，只需点击**提交**即可发送页面进行审核。现在浏览网站上所有可用的内容；刚刚提交的页面尚未显示，因为它尚未发布。为了了解发生了什么，我们需要访问**管理**下的**内容**页面，该页面显示了网站上所有内容的列表以及各种选项，以便使用它，如下所示：

![Administering Content](graphics/1800_06_09.jpg)

请注意，在这个屏幕截图中，前两个提交内容是由用户**David**发布的（而在演示站点中，管理员是**David Mercer】**。这两个页面节点都尚未发布，因为默认设置要求首先对它们进行调节。还要注意的是，最新提交的内容中添加了**新**，以区别于我们已经看到的帖子，当您有大量节点要处理时，这些帖子非常有用。

现在，页面顶部**更新选项**上方显示的内容过滤器是管理研讨会中非常重要的工具。它允许您仅显示满足某些要求的节点。提供了三个过滤标准：**状态、**类型、**类别**。这些选项允许您过滤整个列表，仅显示满足所选方法右侧下拉列表中设置的特定需求的项目。

如果我们想定位一个已经发布的节点，我们会检查**状态**标准，然后从下拉列表中选择**已发布**选项（如上图所示），然后点击**过滤器**。然后，将过滤显示的列表，并仅在页面上显示相关结果。很容易做到！

这一切都很好，但是节制的队伍在哪里呢？好的，如果您查看带有**状态**标准的下拉列表，您会注意到有一个**适度**选项。选择此选项并单击**过滤器**将向我们显示以下结果：

![Administering Content](graphics/1800_06_10.jpg)

这些页面尚未发布，因为**发布选项已禁用，并且为所有页面设置了适度队列**。

### 注

请注意，可以多次使用过滤器来优化结果！

现在管理员可以编辑节点，一切正常后，就可以发布节点了。这样做很简单！比如说，我们想允许发布**管理我**页面，因为经过一点编辑后，我们对它感到满意。只需选择**标题**左侧的框，然后在列表正上方的**更新选项**部分，选择相关选项，如下所示：

![Administering Content](graphics/1800_06_11.jpg)

点击**更新**将确保页面现在按预期发布。您可以通过注销并以匿名用户或身份验证用户的身份查看页面来确认这一点，具体取决于您的权限。

值得注意的是，在更新帖子时有很多选择。您可以将帖子升级到头版，也可以将其降级（如果您选择的话）。您可以使帖子具有粘性（换句话说，它将粘在其列表的前面），如下所示：

![Administering Content](graphics/1800_06_12.jpg)

当**新主题**论坛帖子启用**更新选项**下的**使所选帖子具有粘性**时，您可以看到左侧有一个固定图标，其下方显示的是不具有粘性的最新帖子。您还可以取消发布和删除帖子，这两种方式都可以防止权限不足的用户在网站上查看帖子。不同之处在于，**删除所选帖子**选项会将帖子从系统中完全删除，而未发布的帖子可以在以后重新发布，这对于在需要更正或修改帖子而不删除帖子的情况下将其离线非常有用。

最后，如果无法轻松找到内容，则在内容页面的**搜索**选项卡下提供了一个搜索工具，允许您按关键字进行搜索。请记住，您可以使用 `*`通配符匹配任何字符，以扩大搜索范围。本页面上的**高级搜索**链接还为您提供了几个其他选项来指定搜索条件。

### 注

在您的 cron 运行完成之前，无法搜索新内容！在[第 10 章](10.html "Chapter 10. Running Your Website")中详细讨论了 Cron 和计划任务。

最后，强烈建议您使用搜索选项，以便熟悉每个选项的功能。

# 内容相关模块

除了讨论与内容相关的模块外，本节还将帮助您更好地了解可用的模块，以及使用默认模块和贡献模块可以实现的功能。

我们已经知道如何安装模块，所以我们不会展示如何安装我们讨论的每个贡献。如果与通常的安装方法有任何值得注意的偏差，请安装并启用每个模块，记住检查是否有任何需要在运行时设置的特殊权限。

[第 9 章](09.html "Chapter 9. Advanced Features and Modifications")涉及更高级的主题，我们在此讨论**Flexinod**模块，它构成了与内容直接相关的最后一点信息；所以记得在*结束*的内容之前也要检查一下。

## 聚合器

基于网络的社区可以获得的最大机会之一是共享信息的能力。你真正需要的是一套关于如何呈现这些信息的指导原则，一旦你有了这些指导原则，剩下的就很简单了。事实上，它是如此的简单，现在你只需点击几下，就可以在你的网站上包含来自许多知名来源的新闻和感兴趣的文章。

让包含他人的新闻、文档、文章或任何其他内容变得如此容易的是一个称为**丰富站点摘要（RSS）**的标准。这使得聚合器（使用 RSS 提要的程序）能够理解如何根据 RSS 提要的结构在网页上显示内容。Drupal 附带了一个内置的聚合器，只需在**管理**下的**模块**部分启用它，您就会发现会弹出一些额外的菜单项，允许您在添加内容后管理和查看内容。

假设演示站点希望提供一些来自*国家地理*网站的野生动物相关新闻。我们来到[的新闻网站 http://news.nationalgeographic.com/](http://news.nationalgeographic.com/) 并查找 RSS 提要图标在站点上的显示位置。在这种情况下，它们如下所示：

![Aggregator](graphics/1800_06_13.jpg)

点击此处的**RSS**链接将显示以下页面，幸运的是 Drupal 为我们处理了所有的脏活，我们甚至不需要理解 XML 就可以使用此提要：

![Aggregator](graphics/1800_06_14.jpg)

目前，这可能对您意义不大，但它可以确认在 URL 中给定的地址有一个提要可供使用。知道了这一点，我们现在可以前往我们的站点，在**管理**下寻找**聚合器**链接，以便开始向站点添加此提要。这将带来一个空白的提要列表，以及我们需要的所有其他内容。在此页面上，点击**添加类别**选项卡，出现以下表单：

![Aggregator](graphics/1800_06_15.jpg)

假设您打算使用各种提要，从一开始就对内容进行分类可能是明智的。请记住，为您的网站提供及时、有趣的新闻是一项增值服务，并鼓励用户一次又一次地返回。考虑到这一点，拥有各种相关的提要可能是非常有价值的。

完成后，单击**提交**，然后单击**添加提要**选项卡，弹出以下内容：

![Aggregator](graphics/1800_06_16.jpg)

如你所见，我们有：

1.  指定了新源的标题
2.  向 Drupal 提供了 RSS 提要的位置（对照我们之前在实际的国家地理网站上访问的 RSS 提要页面的 URL 进行检查）
3.  给予一天的**更新间隔**，使其成为每日新闻提要
4.  将此提要与新创建的**商业**类别关联

填写表格时要考虑的事情有很多。首先，您需要确保您没有侵犯源提要创建者将提供的任何许可问题。如果对 feed 可以做什么和不能做什么有限制，请确保您遵守这些限制。

其次，如果您每天只运行一次 cron 脚本，那么将更新间隔设置为一小时没有意义。在这种情况下，cron 最多只能每天更新一次脚本。出于同样的原因，如果 feed 本身只是每周更新一次，那么使用 cron 每隔十分钟更新一次 feed 也没有意义。请与 feed 的提供者核实他们建议您更新 feed 的频率。

考虑到这些因素后，您现在可以点击**提交**将提要添加到您的站点。现在聚合器主页有一些东西要告诉我们，应该是这样的：

![Aggregator](graphics/1800_06_17.jpg)

由于 `cron.php`脚本尚未运行，因此提要中还没有任何项。您可以等待预定任务或 crontab 访问它，或者如果您不想闲逛，只需在浏览器中导航到 `http://localhost/drupal/cron.php`（如果 `cron.php`脚本的路径不同，请确保更改此 URL 以适合您的站点）。记住 `cron.php`只是一个脚本，没有 HTML；因此，即使此页面工作正常，您也不会看到此页面上显示的任何内容。

完成后，单击聚合器页面上的**刷新**查看结果。假设一切正常，您应该得到如下结果：

![Aggregator](graphics/1800_06_18.jpg)

成功从这里您可以看到，自上次更新**6 秒前**起，提要现在包含**9 项**。除此之外，您还可以**编辑**提要，**从提要中删除项目**，或者通过单击**更新项目**手动更新提要-在这种情况下，可以修改提要以反映源站点上的任何更改。就这些！

当然，您现在可以在站点上查看提要的内容。对于演示站点，访问提要的权限已授予匿名用户和经过身份验证的用户。因此，当有人访问该网站并点击主菜单中的**新闻聚合器**链接时，他们会看到如下内容：

![Aggregator](graphics/1800_06_19.jpg)

现在所有用户都可以即时访问*国家地理*提供的所有内容。没有什么能阻止您从任何数量的其他源收集信息，有趣的是，只要您没有侵犯任何许可证，您就可以将您的源提供给其他站点。做到这一点很容易（记住在尝试使用联合块之前启用它）！向下滚动至页面底部，直到看到如下小图标：

![Aggregator](graphics/1800_06_20.jpg)

点击它会显示以下 URL 提供的提要页面（在演示站点中）： `http://localhost/drupal/aggregator/rss`，通过这种方式，内容可以被联合。您不仅限于联合在线订阅源，您已经获得的任何内容都可以联合。

值得注意的是，点击**新闻聚合器**下的**来源**链接，可以在导航栏中显示您的来源。在这种情况下，我们得到以下信息：；请注意，我添加了来自 WWF（世界自然基金会，前身为世界野生动物基金会）的提要：

![Aggregator](graphics/1800_06_21.jpg)

这为我们提供了每个源的提要的一个很好的摘要。到目前为止还不错，但是*还有***和***链接做什么？*点击 WWF 来源的**更多**链接，出现以下页面：

![Aggregator](graphics/1800_06_22.jpg)

从这里可以点击提要的名称以转到源网站，在本例中为[http://www.panda.org](http://www.panda.org) 。与此源关联的提要列在标题框下方的页面上，以便按源轻松访问提要。单击框右上角的橙色辛迪加图标可将浏览器转到实际的提要页面。本例中为[http://www.panda.org/rss/news.cfm?Press%20Office](http://www.panda.org/rss/news.cfm?Press%20Office) 。

除此之外，页面顶部还有两个选项卡。**分类**选项卡打开以下屏幕截图，允许我们将单个提要项放入各种类别（假设您有各种可用类别）。

此屏幕截图显示第二个提要项被分配两个类别，即**商业**和**特殊**。在本例中，创建**特殊**类别时考虑了特定的目的。因为时不时有消息温暖人心，所以所有被标记在**特别**类别中的项目都应该在网站上的一个特殊区块中显示，这样每个用户在浏览网站上的任何页面时都可以看到好消息。

![Aggregator](graphics/1800_06_23.jpg)

**源**页面上的最后一个选项卡只会显示创建提要所使用的页面。从这里，您可以轻松地对提要进行所需的任何更改。

由于我们还没有涉及分类法和分类法，您可能希望在阅读[第 7 章](07.html "Chapter 7. Advanced Content")后回到本节中的内容，因为现在可能有一些事情尚不清楚。例如，我们在本章后面添加了一个模块来根据其类别显示内容，这就是为什么我们可以按照下面所示的方式处理**特殊**类别。这里提供的信息只是给你一个想法，你将能够做什么，希望它不会太混乱了。

请记住，您完全有可能希望在站点的某个区块中显示一些最新的提要，请转到**管理**下的**区块**类别链接并启用其中一个新块，以便显示其最新项目。注意，也可以显示类别中的最新提要：

![Aggregator](graphics/1800_06_24.jpg)

完成此操作后，您将在 web 页面上看到新的提要及其项目选择。您可以在其配置页面的**区块特定设置**中配置显示的新闻条目数（点击**配置**打开此页面）——就我们而言，默认的五条提要选项就可以了。

现在，假设用户拥有博客权限，并且提要许可证允许您的站点这样做，您可以通过单击每个项目旁边出现的小**b**图标，将提要项目添加到博客中，如下所示：

![Aggregator](graphics/1800_06_25.jpg)

在你的博客中添加一个新闻条目会使文章更持久，因为当提要中的条目列表被清除时，它不会丢失。当然，如果您打算随着时间的推移构建大量内容，那么很可能需要使用归档模块。

聚合器还有一个更重要的部分来查看配置！点击主菜单**设置**链接下的**聚合器**将显示以下页面：

![Aggregator](graphics/1800_06_26.jpg)

此接口提供对站点使用的提要中允许的 HTML 类型的控制。对于大多数（如果不是所有要聚合的源）来说，这应该足够了，但如果某些源有问题，则可能是它们使用了本节中未指定的标记。如有疑问，请保持原样！

接下来，将显示每个提要通常要显示的项目数以及保留旧提要项目的时间，并且在这里很容易做出明智的选择。最后一节规定了类别选择界面（在**来源**页面的**分类**选项卡上）应使用复选框还是多选择器。我们已经看到了使用中的复选框，它们对于演示站点来说是很好的。但是，如果启用了**多选择器**，则类别选择将如下所示：

![Aggregator](graphics/1800_06_27.jpg)

在我们继续之前，再次值得一提的是，如果在某个阶段，您感到迫切需要联合您的站点内容，您可以启用辛迪加块来强制 Drupal 显示橙色辛迪加图标。此外，如果您希望加强对网站联合的控制，您可以查看[中提供的联合模块 http://drupal.org/project/syndication](http://drupal.org/project/syndication) 。

## 档案

**归档**模块简单明了！在**管理**下的**模块**部分启用。然后，转到**块**部分，启用名为**日历的选项浏览档案**，将其放置在最合适的位置，然后离开。在演示站点的情况下，可以设想每天都会添加大量内容，因此归档日历将是按时间顺序定位内容的好方法。出于这个原因，浏览档案的**日历**块的评级较低，因此它总是显示在右侧边栏的顶部。提交更改后，用户可以通过在日历中搜索某个项目的发布时间来导航到该项目：

![Archive](graphics/1800_06_28.jpg)

没那么重要；然而，值得注意的是，点击日期或更改日历上显示的月份将立即在内容部分显示一个表单，允许用户使用下拉列表进行搜索，如：

![Archive](graphics/1800_06_29.jpg)

这证明了 Drupal 的优秀设计，如此强大的功能可以如此轻松地实现。如果这不能给你留下深刻印象，那就不会有太多了！

## 类似条目

我不知道你的情况，但我经常发现，在阅读新闻故事时，我会通过**类似/相关的故事**链接，试图了解更多关于某一特定新闻的信息，或者只是对我正在看的任何东西有一个更全面的了解。显示相关项目的能力是非常有用的功能，通过安装**类似条目**模块，在 Drupal 上很容易使用也就不足为奇了。

从 Drupal 网站下载模块并将其解压缩到您的 `modules`文件夹中。完成后，您现在需要在**管理**菜单项下的**模块**部分中启用该模块，搜索名为**类似**的新模块。在这种情况下，查看 `readme`文件非常重要，因为它可能会影响您如何安装此模块，具体取决于您的系统设置。

下一个任务是决定您希望在站点上显示多少相关项目。为此，在启用该块并设置其**位置**和**权重之前，请转到**管理**下的**块**部分，点击**类似条目**块旁边的**配置**来设置编号。**演示站点使用默认设置：

![Similar Entries](graphics/1800_06_30.jpg)

如果某些内容类型不可供选择，那么这很可能是因为网站上还没有该特定类型的内容。一旦您创建了某一类型的内容，它就会出现在**节点类型中，以显示**下拉列表。此外，假设分类模块已启用（应该启用），则有三个选项与相似条目模块如何查找其相关内容相关。在这种情况下，默认选项很好，因为我们不关心类别筛选。但是，如果我只想显示来自**保护**论坛容器的相关内容，则需要进行以下设置：

![Similar Entries](graphics/1800_06_31.jpg)

此页面上的其余设置对于每个块都是标准设置，我们已经了解了如何使用这些设置。在不妨碍配置的情况下，只需启用块并将其放置在所需的位置。现在，当用户查看网站上的任何内容时，该模块通过搜索具有相似性的其他帖子来显示任何相关内容。例如，在查看以下文章时，请注意，现在右侧边栏中出现了一个新块：

![Similar Entries](graphics/1800_06_32.jpg)

正如您所看到的，所展示的五个相关项目中有三个在它们的标题中有**狩猎**，因此我们希望它们会出现在这个列表中。*另外两个呢？*如果你仔细看，这篇文章的内容提到了陷阱和杜松子酒陷阱，这两个项目的标题没有明确提到狩猎。

因此，从这里我们可以看到，为了显示类似帖子或项目的列表，相似条目模块搜索所有发布到站点的标题，并列出标题中有任何相似之处的标题。不满足于此，它还搜索帖子的正文内容，寻找相似之处，并呈现这些相似之处（假设块中有足够的空间）。这显然对做研究的人或新闻类网站非常有用。

## 分类块

我们将在这里讨论的最后一个模块与**分类**模块有关。不幸的是，这取决于您的站点上已经启用了分类。因此，您可能希望跳过本节，直到您阅读了本节后面紧跟的关于*高级内容*的章节。

与前面讨论的模块一样，此模块还向用户显示类似的主题，具体取决于用户正在查看的内容。在本例中，*分类模块*根据最近发布的项目的类别显示其列表。现在，您应该仔细考虑是喜欢本模块还是上一个模块，以便为读者提供相关主题。在页面上同时显示这两个内容将产生一些冗余，因为块的内容显然会有一些重叠。

### 注

功能必须反映并满足站点的要求。其他任何东西都是多余的！

换句话说，不要在你的网页上塞满了不必要的信息或功能；这会损害网站的可用性，从而间接影响其受欢迎程度。

模块的安装相当基本，只需将下载内容解压缩到 `modules`文件夹即可。您需要对数据库执行一个 `.mysql`脚本，因此再次确保在进行任何类似更改之前有一个最新的备份。您可以通过在命令行执行以下命令来运行脚本（请记住为您的系统使用正确的用户名和数据库）：

```
$ mysql u<username> -p drupal < C:\apache2triad\htdocs\drupal\modules\taxonomy_block\taxonomy_block.mysql

```

如果机器上没有保存 `taxonomy_block.mysql`脚本，请将文件路径更改为适合您系统的路径。假设该命令执行起来没有任何麻烦，您现在可以转到**模块**部分，以启用站点的新添加，在列表中查找**分类模块**。启用模块后，您需要使用**管理**下的**块**页面，决定在网站上显示模块的位置。

与其他模块不同，分类法块不会自动出现在要启用的块列表中，相反，您会在**块**菜单项下的主菜单中找到指向它的链接。此链接将打开一个块创建页面，您可以在该页面中根据希望将此块与哪个类别关联来规定要显示的信息类型，如：

![Taxonomy Block](graphics/1800_06_33.jpg)

在本例中，我们选择展示一个区块，其中包含与罐装狮子狩猎这一有争议的问题相关的信息。**块描述**选项允许您输入块的名称，因为它将出现在父**块**页面上的块列表中。**摘要长度**设置要为块中显示的每个帖子显示的字符数。在这种情况下，我决定为每个帖子显示**50**个字符，但将显示的相关主题数量限制为**3**个，以免占用该区块太多空间。最后，该区块与预期的**狩猎-罐装**类别相关联。

点击**创建块**保存这些更改，现在我们可以进入**块**页面，启用块并在站点上显示。在**禁用**块列表中搜索您在上一页输入的**块说明**。一旦你找到了它，就可以选择它应该显示在哪里以及它的重量，然后点击**保存块**。现在，您已经在站点上启动并运行了基于分类法的相关内容。在演示站点中，相似条目块被禁用，而这一块在其位置被启用。

现在，当用户查看任何与罐头狩猎相关的内容时，他们会看到如下内容：

![Taxonomy Block](graphics/1800_06_34.jpg)

当然，根据创建块的方式，可能会产生各种各样的结果。您可能会发现，您只是想完全忽略摘要，在这种情况下，您将只显示每篇文章的标题。无论您选择什么，您现在都可以使用一些相当强大的功能。只需记住，不要因为它们工作得很好而忘乎所以地添加块。

# 总结

在使用诸如 Drupal 之类的 CMS 系统时，知道如何高效、快速地处理内容是一个非常理想的特性。为此，本章为你的工作奠定了基础，通过对基本原理的概述，以及对其他方面的了解。首先，我们简要介绍了可以使用 Drupal 实现的各种类型的内容，然后讨论了如何使用管理工具处理这些内容。

在运行网站时，您将承担的最重要的工作之一是管理网站的内容。目前看来，这似乎相当简单，但随着网站规模的扩大，这项工作变得稍微困难一些。确保您花时间学习**管理**菜单中与内容相关的管理区域，将确保您在网站使用越来越广泛或开始尝试更复杂的面向内容的任务时掌握最新信息。

本章的后半部分演示了 Drupal 附带的一些强大功能，或者是由贡献提供的功能。我们发现，可以相对轻松地聚合 RSS 提要，并反过来联合内容，以便其他网站可以使用。对于整个互联网来说，能够做到这一点是一个巨大的飞跃，希望你能传播关于使用 Drupal 是多么容易的好消息。

在对如何使用内容以及可使用的内容类型有了深入了解之后，我们现在准备研究一些稍微高级一些的内容问题。下一章将讨论如何创建自己的动态和有吸引力的内容，以及如何通过使用分类模块对内容进行分类。